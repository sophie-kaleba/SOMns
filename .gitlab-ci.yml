stages:
  - benchmark
  - full-test

variables:
  PYTHONUNBUFFERED: "true"
  JVMCI_VERSION_CHECK: ignore
  ECLIPSE_EXE: /home/gitlab-runner/.local/eclipse/eclipse
  JAVA_HOME: /usr/lib/jvm/java-8-openjdk-amd64

before_script:
  - git submodule update --init

svm_tests:
  stage: full-test
  tags: [benchmarks, infinity]
  script:
    - ant native-tests

benchmark_havlak_native_job:
  stage: benchmark
  tags: [benchmarks, infinity]
  allow_failure: true
  script:
    - ant native
    - ./havlak_benchmark.sh
